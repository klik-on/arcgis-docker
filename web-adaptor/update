unregister webadaptor dan unfederate
### jika tidak bisa
1. Go to https://SERVER.WEBGIS.LOKAL:6443/arcgis/admin
2. Navigate through Security > Config
   - Here you will see that it still reads 'ARCGIS_PORTAL'
3. Update this page so the 'Authentication Tier' is 'GIS_SERVER'
This should resolve the issue you are seeing and allow you to federate your server with the portal.
###

https://portal.webgis.lokal:7443/arcgis/portaladmin
https://server.webgis.lokal:6443/arcgis/admin

### remove images docker
docker compose up -d

portainer ==> WEBADAPTOR ==> network samakan
Container console ==> $ docker exec -it WEBADAPTOR /bin/bash
root@agsipsdh:/usr/local/tomcat#
# cd /tmp
tmp# ./as_wa.sh
tmp# ./ap_wa.sh

federate server
Service URL https://agsipsdh.ddns.net/server
Administration URL https://SERVER.WEBGIS.LOKAL:6443/arcgis

Reff:
Tomcat Server With LetsEncrypt
https://tecadmin.net/how-to-install-lets-encrypt-ssl-with-tomcat/
https://medium.com/@mashrur123/a-step-by-step-guide-to-securing-a-tomcat-server-with-letsencrypt-ssl-certificate-65cd26290b70

#### Forward to HTTPS/SSL
# vi /usr/share/tomcat/conf/web.xml
Tambahkan diakhir baris sebelum  tag </web-app>
    <security-constraint>
        <web-resource-collection>
        <web-resource-name>Automatic Forward to HTTPS/SSL
        </web-resource-name>
        <url-pattern>/*</url-pattern>
        </web-resource-collection>
        <user-data-constraint>
           <transport-guarantee>CONFIDENTIAL</transport-guarantee>
        </user-data-constraint>
    </security-constraint>
</web-app>
